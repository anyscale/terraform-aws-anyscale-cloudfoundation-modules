# Examples for using the aws-anyscale-s3 module

These examples demonstrate how to use the `aws-anyscale-s3` module to create AWS S3 resources for Anyscale deployments. S3 buckets are used to store logs, artifacts, and other data generated by Anyscale services.

## Overview

The `aws-anyscale-s3` module creates AWS S3 buckets with configurable features including:
- Server-side encryption (AES256 or KMS)
- CORS configuration for web access
- Object versioning
- Lifecycle policies for cost optimization
- Access logging
- Public access blocking for security
- Custom bucket naming and tagging

This module is essential for Anyscale deployments as it provides the storage infrastructure needed for logs, checkpoints, and other persistent data.

## Examples Included

### Default Configuration (`all_defaults`)
This example demonstrates the minimal configuration required to create an S3 bucket:
- Creates an S3 bucket with default settings
- Uses the default bucket prefix (`anyscale-`)
- Applies AES256 server-side encryption
- Configures CORS for Anyscale web UI access
- Blocks all public access for security
- Uses default tags and naming conventions

### Kitchen Sink Configuration (`kitchen_sink`)
This example demonstrates a comprehensive S3 setup with all available options:
- Creates an S3 bucket with custom name (`anyscale-tf-test-bucket-{region}`)
- Enables `force_destroy` for easy cleanup during testing
- Configures custom CORS rules for specific Anyscale console access
- Enables object versioning for data protection
- Uses AES256 server-side encryption
- Implements complex lifecycle rules:
  - Disabled rule with tag-based filtering and storage transitions
  - Enabled rule with multipart upload cleanup and version management
  - Transitions objects to different storage classes (ONEZONE_IA, GLACIER)
  - Manages noncurrent versions with expiration policies
- Applies comprehensive tagging strategy

### No Resources Configuration (`test_no_resources`)
This example demonstrates how to disable the module entirely:
- Sets `module_enabled = false`
- No S3 resources are created
- Useful for testing or when S3 is not required

## Important Notes

- S3 buckets are globally unique - ensure your bucket name is available
- The `force_destroy` option should only be used in test environments
- Lifecycle rules can significantly impact costs - review carefully before production use
- CORS configuration is essential for Anyscale web UI functionality
- Consider using KMS encryption for enhanced security in production environments

## Dependencies

This module depends on:
- AWS provider with appropriate permissions for S3 resources
- Terraform >= 1.0

The module can be used standalone but is typically used as part of the larger Anyscale Cloud Foundation deployment.
